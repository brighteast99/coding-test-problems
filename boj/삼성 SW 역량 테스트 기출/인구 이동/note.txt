연합을 구하는 부분은 BFS/DFS로 무난하게 해결 가능할 것으로 보임.